!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=0)}([function(e,t,n){"use strict";var a=u(n(1)),i=u(n(2)),r=u(n(3)),o=u(n(4)),s=u(n(5)),c=u(n(6)),l=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}document.addEventListener("DOMContentLoaded",(function(){JSON.parse(localStorage.getItem("services"))||localStorage.setItem("services",JSON.stringify([{_id:"5ed8f328f3757106ec6b0e73",type:"electician",tasks:["Fix the light","Install equipment","Install the light","Repair cable","Check wiring","Repair the socket"]},{_id:"5ed8f35df3757106ec6b0e74",type:"plumber",tasks:["Unblock toilet","Unblock a sink","Fix a water leak","Install a sink","Install a shower","Install a toilet"]},{_id:"5ed8f3c2f3757106ec6b0e75",type:"gardener",tasks:["Water the plants","Trim the bushes","Mow the lawn","Plant flowers","Design a garden","Spray plant"]},{_id:"5ed8f3daf3757106ec6b0e76",type:"housekeeper",tasks:["Clean the bathroom","Clean the house","Clean the apartment","Cleaning the nursery","Clean carpets","Wash the windows"]},{_id:"5ed8f4eba1da6a0fb8c934c1",type:"cook",tasks:["Make a dinner","Make a lunch","Make a breakfast","Cook for a party","Cook romatic surprise","Cook for baby"]}]));var e=JSON.parse(localStorage.getItem("tasks"))||[],t=new i.default,n=new a.default,u=new r.default(t,e),d=new o.default(n,e),f=new l.default,v=new s.default(u,t,f),h=new c.default(d,n,f);f.subscribe("addEvent",h.handleCreateTasks.bind(h)),f.subscribe("showEvent",v.handleGetTasks.bind(v)),f.subscribe("editEvent",h.handleEditForm.bind(h)),v.handleShowTasks()}))},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.typeOfService,this.taskOfService,this.descriptionText,this.location,this.taskText}var t,n,i;return t=e,(n=[{key:"showTaskForm",value:function(e){var t=document.querySelector(".action-block");t.innerHTML="",t.style.width="35%";var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("class","cancel"),t.append(n);var a=document.createElement("div");a.setAttribute("class","add-info"),t.append(a);var i=document.createElement("p");i.setAttribute("class","caption"),i.innerText="new task",a.append(i);var r=document.createElement("p");r.setAttribute("class","task-info"),a.append(r);var o=document.createElement("p");o.setAttribute("class","location-info"),a.append(o);var s=document.createElement("button");s.setAttribute("class","action-button"),s.innerText=e,a.append(s);var c=document.createElement("div");c.setAttribute("class","location-block"),t.append(c);var l=document.createElement("p");l.setAttribute("class","caption"),l.innerText="location",c.append(l);var u=document.createElement("input");u.setAttribute("class","input-location"),c.append(u);var d=document.createElement("div");d.setAttribute("class","type-service"),t.append(d);var f=document.createElement("p");f.setAttribute("class","caption"),f.innerText="type service",d.append(f);var v=document.createElement("div");v.setAttribute("class","service-list"),d.append(v);var h=document.createElement("div");h.setAttribute("class","task-block"),t.append(h);var p=document.createElement("p");p.setAttribute("class","caption"),h.append(p);var b=document.createElement("div");b.setAttribute("class","task-name-list"),h.append(b);var k=document.createElement("div");k.setAttribute("class","description-block"),t.append(k);var y=document.createElement("p");y.setAttribute("class","caption"),y.innerText="description",k.append(y);var m=document.createElement("textarea");m.setAttribute("class","description"),m.placeholder="Enter description",k.append(m)}},{key:"showServices",value:function(e){var t=document.body.querySelector(".service-list");e.forEach((function(e){var n=document.createElement("div");n.setAttribute("class","service"),n.id=e._id,t.append(n);var a=document.createElement("p");a.innerText=e.type,n.append(a);var i=document.createElement("button");i.setAttribute("class","type-button"),i.style.background="url(./images/".concat(e.type,".png) no-repeat center center"),n.prepend(i)}))}},{key:"actionCancel",value:function(){var e=document.body.querySelector(".action-block");e.innerHTML="",e.style.width="0"}},{key:"changeService",value:function(e,t){for(var n=document.body.querySelector(".service-list"),a=document.body.querySelector(".task-block"),i=0;i<n.childNodes.length;i++)for(var r=0;r<n.childNodes[i].childNodes.length;r++)n.childNodes[i].childNodes[r].style.border="none";t.childNodes[0].style.border="1px solid #4c71fe";var o=t.innerText.toLowerCase();this.taskOfService="",this.typeOfService=o,a.childNodes[0].innerText="".concat(o," tasks"),a.childNodes[1].innerHTML="",e.forEach((function(e){e._id===t.id&&e.tasks&&e.tasks.forEach((function(e){var t=document.createElement("span");t.setAttribute("class","task-name"),t.innerText=e,a.childNodes[1].append(t)}))})),a.style.display="block",this.changeTask()}},{key:"chooseTask",value:function(e){for(var t=document.body.querySelector(".task-name-list"),n=0;n<t.childNodes.length;n++)t.childNodes[n].style.border="none";e.style.border="1px solid #4c71fe",this.taskOfService=e.innerText.toLowerCase(),this.changeTask()}},{key:"loadLocation",value:function(e){var t=document.body.querySelector(".input-location");t.value="".concat(e.region,", ").concat(e.city),this.location=t.value,document.body.querySelector(".location-info").innerText="My address is ".concat(this.location)}},{key:"changeTaskInfo",value:function(e){this.descriptionText=e?e.toLowerCase():"",this.changeTask()}},{key:"changeTask",value:function(){var e=document.body.querySelector(".task-info");this.typeOfService?this.descriptionText?this.taskOfService?e.innerHTML="I need ".concat("a ".concat(this.typeOfService).bold()," \n                to ").concat(this.taskOfService.bold(),", \n                ").concat(this.descriptionText.bold(),"."):e.innerHTML="I need ".concat("a ".concat(this.typeOfService).bold(),", \n                ").concat(this.descriptionText.bold(),"."):this.taskOfService?e.innerHTML="I need ".concat("a ".concat(this.typeOfService).bold()," \n                to ").concat(this.taskOfService.bold(),"."):e.innerHTML="I need ".concat("a ".concat(this.typeOfService).bold(),"."):e.innerHTML="".concat(this.descriptionText.bold(),".");var t=e.innerText.indexOf(",");this.taskText=e.innerText.slice(0,t)}},{key:"changeLocation",value:function(e){document.body.querySelector(".location-info").innerText="My address is ".concat(e),this.location=e}},{key:"getTaskInfo",value:function(){return{typeOfService:this.typeOfService,taskOfService:this.taskOfService,taskText:this.taskText,description:this.descriptionText,location:this.location}}},{key:"loadEditForm",value:function(e,t){for(var n=document.body.querySelector(".description"),a=document.body.querySelector(".input-location"),i=document.body.querySelector(".service-list").childNodes,r=0;r<i.length;r++)i[r].innerText.toLowerCase()===e.typeOfService&&this.changeService(t,i[r]);for(var o=document.body.querySelectorAll(".task-name"),s=0;s<o.length;s++)o[s].innerText.toLowerCase()===e.taskOfService&&this.chooseTask(o[s]);n.innerText=e.description,a.value=e.location,this.changeTaskInfo(e.description),this.changeLocation(e.location),this.changeTask()}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"showTask",value:function(){var e=document.querySelector(".container"),t=document.createElement("div");t.setAttribute("class","action-block"),e.append(t);var n=document.createElement("div");n.setAttribute("class","current-tasks"),e.append(n);var a=document.createElement("button");a.setAttribute("class","new-task"),a.innerText="+ new task",n.append(a);var i=document.createElement("div");i.setAttribute("class","tasks-list"),n.append(i)}},{key:"showTaskList",value:function(e){var t=document.body.querySelector(".tasks-list");t.innerHTML="";var n=["Jan","Feb","Mar","April","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Sunday","Monday","Tuesday","Wednesday","Friday","Saturday"];e&&e.forEach((function(e){var i=document.createElement("div");i.setAttribute("class","task"),i.id=e.id,t.append(i);var r=document.createElement("p"),o=new Date(e.dateCreating),s=o.getHours()<10?"0".concat(o.getHours()):o.getHours(),c=o.getMinutes()<10?"0".concat(o.getMinutes()):o.getMinutes(),l="".concat(a[o.getDay()],", ").concat(n[o.getMonth()]," ").concat(o.getDate(),", ").concat(s,":").concat(c);r.innerText=l,i.append(r);var u=document.createElement("p");u.innerText=e.taskText,i.append(u);var d=document.createElement("button");d.setAttribute("class","edit-button"),d.innerText="edit",i.append(d);var f=document.createElement("button");f.setAttribute("class","delete-button"),f.innerText="delete",i.append(f)}))}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.tasks=n}var t,n,i;return t=e,(n=[{key:"saveTasks",value:function(e){localStorage.setItem("tasks",JSON.stringify(e))}},{key:"getTasks",value:function(){this.tasks&&this.view.showTaskList(this.tasks)}},{key:"deleteTask",value:function(e){var t=this;this.tasks.forEach((function(n,a){n.id==e.id&&t.tasks.splice(a,1)})),this.saveTasks(this.tasks)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.services=JSON.parse(localStorage.getItem("services")),this.tasks=n,this.currentTask}var t,n,i;return t=e,(n=[{key:"saveTasks",value:function(e){localStorage.setItem("tasks",JSON.stringify(e))}},{key:"getServices",value:function(e){this.view.showServices(this.services),e&&this.getCurrentTask(e)}},{key:"getCurrentTask",value:function(e){var t;this.tasks.forEach((function(n){n.id==e.id&&(t=n)})),this.currentTask=e.id,this.view.loadEditForm(t,this.services)}},{key:"getLocation",value:function(){var e=this;fetch("https://ipinfo.io/json").then((function(e){return e.json()})).then((function(t){e.view.loadLocation(t)})).catch((function(e){return console.error("Connection Error:".concat(e))}))}},{key:"addTask",value:function(e){e.typeOfService&&e.location?(e.id||(e.id=this.tasks.length>0?this.tasks[this.tasks.length-1].id+1:1),this.tasks.push(e),this.saveTasks(this.tasks)):alert("Enter all data, please!!")}},{key:"editTask",value:function(e){var t=this;this.tasks.forEach((function(n,a){n.id==t.currentTask&&(n.typeOfService=e.typeOfService,n.taskOfService=e.taskOfService,n.dateCreating=Date.now(),n.taskText=e.taskText,n.description=e.description,n.location=e.location)})),this.saveTasks(this.tasks)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=n,this.subscribers=a,this.tasks}var t,n,i;return t=e,(n=[{key:"handleShowTasks",value:function(){this.view.showTask(),this.handleGetTasks(),this.actionForShow()}},{key:"handleGetTasks",value:function(){this.model.getTasks()}},{key:"actionForShow",value:function(){var e=this;document.body.querySelector(".tasks-list").addEventListener("click",(function(t){var n=t.target,a=n.parentElement;"delete-button"===n.className?(e.model.deleteTask(a),e.model.getTasks()):"edit-button"===n.className&&e.subscribers.publish("editEvent",a)})),document.body.querySelector(".new-task").addEventListener("click",(function(){return e.subscribers.publish("addEvent")}))}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.view=n,this.subscribers=a}var t,n,i;return t=e,(n=[{key:"handleCreateTasks",value:function(){this.view.showTaskForm("create task"),this.model.getServices(),this.model.getLocation(),this.actionforForm()}},{key:"handleEditForm",value:function(e){this.view.showTaskForm("edit task"),this.model.getServices(e),this.actionforForm()}},{key:"actionforForm",value:function(){var e=this,t=document.body.querySelector(".cancel"),n=document.body.querySelector(".input-location"),a=document.body.querySelector(".description"),i=document.body.querySelector(".service-list"),r=document.body.querySelector(".task-name-list"),o=document.body.querySelector(".action-button");a.addEventListener("input",(function(){e.view.changeTaskInfo(a.value)})),n.addEventListener("input",(function(){e.view.changeLocation(n.value)})),i.addEventListener("click",(function(t){var n=t.target.parentElement;"service"===n.className&&e.view.changeService(e.model.services,n)})),r.addEventListener("click",(function(t){var n=t.target;"task-name"===n.className&&e.view.chooseTask(n)})),t.addEventListener("click",(function(){e.view.actionCancel()})),o.addEventListener("click",(function(t){var n=e.view.getTaskInfo(),a={id:n.id,typeOfService:n.typeOfService,taskOfService:n.taskOfService,dateCreating:Date.now(),taskText:n.taskText,description:n.description,location:n.location};"create task"===t.target.innerText.toLowerCase()?e.model.addTask(a):"edit task"===t.target.innerText.toLowerCase()&&e.model.editTask(a),e.subscribers.publish("showEvent"),e.view.actionCancel()}))}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscribers={}}var t,n,i;return t=e,(n=[{key:"subscribe",value:function(e,t){this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t)}},{key:"publish",value:function(e,t){this.subscribers[e]&&this.subscribers[e].forEach((function(e){return e(t)}))}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i}]);